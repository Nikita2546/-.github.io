const translations = {
    ru: {
        nav_title: 'КПУП "Речицаводоканал"',
        nav_subtitle: "Вода для Речицы с 1967 года",
        nav_home: "Главная",
        nav_services: "Услуги",
        nav_about: "О нас",
        nav_staff: "Сотрудники",
        nav_news: "Новости",
        nav_contacts: "Контакты",
        nav_admin: "Админ-панель",
        hero_title: "Чистая вода — основа благополучия Речицы",
        hero_text: "Коммунальное предприятие «Речицаводоканал» обеспечивает надёжное водоснабжение и водоотведение более чем для 80 000 жителей города и района. Мы заботимся о качестве каждой капли и стабильности каждой трубы — с 1967 года и на годы вперёд.",
        services_title: "Наши услуги",
        service1_title: "Консультации",
        service1_text: "Помощь в расчёте платежей, подключении счётчиков и разъяснении нормативов.",
        service2_title: "Аварийная служба",
        service2_text: "Круглосуточно! Звоните при протечках на ул. Ленина, Советской, Доватора и других.",
        service3_title: "Подключение дома",
        service3_text: "Оформим техусловия и подключим ваш дом в Речице или пригороде к водопроводу и канализации.",
        service4_title: "Справки и документы",
        service4_text: "Выдадим справку об отсутствии задолженности, технические характеристики и другое.",
        service5_title: "Полезная информация",
        service5_text: "Правила пользования, нормативы, тарифы и ответы на часто задаваемые вопросы.",
        service6_title: "Анализ воды",
        service6_text: "Закажите выезд специалиста для проверки качества воды у вас дома в Речице.",
        about_title: "О нас",
        about1_title: "История",
        about1_text: "С 1967 года мы обеспечиваем Речицу чистой водой. Начинали с одной насосной станции — сегодня управляем сетью в 300+ км.",
        about2_title: "Инфраструктура",
        about2_text: "5 насосных станций, очистные сооружения (30 000 м³/сутки), лаборатория с современным оборудованием.",
        about3_title: "Достижения",
        about3_text: "Лауреат конкурса \"Лучшее ЖКХ Беларуси-2025\". ISO 9001. Снижение аварийности на 20% за 2 года.",
        about4_title: "Миссия",
        about4_text: "Обеспечивать каждую семью в Речице и районах надёжной, безопасной и доступной водой — сегодня и в будущем.",
        about5_title: "Зона обслуживания",
        about5_text: "г. Речица, Брагинский, Лоевский и Хойникский районы — более 80 000 жителей.",
        about6_title: "Лицензии",
        about6_text: "Лицензия №ВК-247500 на водоснабжение и водоотведение, выдана до 2030 года.",
        staff_title: "Руководство и подразделения",
        director: "Директор",
        chief_engineer: "Главный инженер",
        emergency: "Круглосуточно",
        lab: "Контроль качества",
        news_title: "Новости Речицы",
        news1_title: "Качество воды в Речице соответствует нормам",
        news1_text: "По итогам ежемесячного мониторинга вода в Речице соответствует всем санитарным нормам.",
        news2_title: "Завершён ремонт на ул. Доватора",
        news2_text: "На участке ул. Доватора (от д. 10 до д. 22) заменено 180 метров водопроводных труб.",
        news3_title: "Модернизация насосной станции №3",
        news3_text: "Установлены новые насосы Grundfos. Экономия электроэнергии — 25%.",
        news4_title: "Новые фильтры на очистных сооружениях",
        news4_text: "Внедрена современная система доочистки сточных вод. Снижение взвешенных веществ на 40%.",
        contacts_title: "Контакты",
        contact1_title: "Адрес",
        contact2_title: "Email",
        contact3_title: "График работы",
        schedule: "Пн–Пт: 08:00–17:00<br>Перерыв: 13:00–14:00<br>Сб–Вс: выходной",
        footer_note: "Служим Речице с заботой о каждом доме и каждой капле воды.",
        admin_title: "Административная панель",
        admin_login: "Логин:",
        admin_password: "Пароль:",
        admin_enter: "Войти",
        admin_actions: "Действия администратора",
        admin_add_news: "Добавить новость",
        admin_edit_rates: "Редактировать тарифы",
        admin_feedback: "Обратная связь",
        admin_logout: "Выйти"
    },
    be: {
        nav_title: 'КПУП "Рэчыцавадаканал"',
        nav_subtitle: "Вада для Рэчыцы з 1967 года",
        nav_home: "Галоўная",
        nav_services: "Паслугі",
        nav_about: "Аб нас",
        nav_staff: "Супрацоўнікі",
        nav_news: "Навіны",
        nav_contacts: "Кантакты",
        nav_admin: "Адмін-панэль",
        hero_title: "Чыстая вада — аснова дабрабыту Рэчыцы",
        hero_text: "Камунальнае прадпрыемства «Рэчыцавадаканал» забяспечвае надзейнае водазабеспячэнне і водавыдаленне больш чым для 80 000 жыхароў горада і раёна. Мы клапоцімся пра якасць кожнай кроплі і стабільнасць кожнай трубы — з 1967 года і на гады наперад.",
        services_title: "Нашы паслугі",
        service1_title: "Кансультацыі",
        service1_text: "Дапамога ў разліку плацяжоў, падключэнні лічыльнікаў і растлумачэнні норматываў.",
        service2_title: "Аварыйная служба",
        service2_text: "Кругласутачна! Тэлефануйце пры пратэчках на вул. Леніна, Савецкай, Даватара і іншых.",
        service3_title: "Падключэнне дома",
        service3_text: "Афармім тэхумовы і падключым ваш дом у Рэчыцы ці прыгарадзе да вадаправода і каналізацыі.",
        service4_title: "Даведкі і дакументы",
        service4_text: "Выдадзім даведку аб адсутнасці забаргаванасці, тэхнічныя характарыстыкі і іншае.",
        service5_title: "Карысная інфармацыя",
        service5_text: "Правілы карыстання, норматывы, тарыфы і адказы на часта задаўныя пытанні.",
        service6_title: "Аналіз вады",
        service6_text: "Замовіце выезд спецыяліста для праверкі якасці вады ў вас дома ў Рэчыцы.",
        about_title: "Аб нас",
        about1_title: "Гісторыя",
        about1_text: "З 1967 года мы забяспечваем Рэчыцу чыстай вадой. Пачыналі з адной насоснай станцыі — сёння кіруем сеткай у 300+ км.",
        about2_title: "Інфраструктура",
        about2_text: "5 насосных станцый, ачышчальныя збудаванні (30 000 м³/суткі), лабараторыя з сучасным абсталяваннем.",
        about3_title: "Дасягненні",
        about3_text: "Лаўрэат конкурсу \"Лепшае ЖКГ Беларусі-2025\". ISO 9001. Скарачэнне аварыйнасці на 20% за 2 гады.",
        about4_title: "Місія",
        about4_text: "Забяспечваць кожную сям'ю ў Рэчыцы і раёнах надзейнай, бяспечнай і даступнай вадой — сёння і ў будучыні.",
        about5_title: "Зона абслугоўвання",
        about5_text: "г. Рэчыца, Брагінскі, Лоеўскі і Хойніцкі раёны — больш за 80 000 жыхароў.",
        about6_title: "Ліцэнзіі",
        about6_text: "Ліцэнзія №ВК-247500 на водазабеспячэнне і водавыдаленне, выдадзеная да 2030 года.",
        staff_title: "Кіраўніцтва і падраздзяленні",
        director: "Дырэктар",
        chief_engineer: "Галоўны інжынер",
        emergency: "Кругласутачна",
        lab: "Кантроль якасці",
        news_title: "Навіны Рэчыцы",
        news1_title: "Якасць вады ў Рэчыцы адпавядае нормам",
        news1_text: "Па выніках штомесячнага маніторынгу вада ў Рэчыцы адпавядае ўсім санітарным нормам.",
        news2_title: "Завершаны рамонт на вул. Даватара",
        news2_text: "На ўчастку вул. Даватара (ад д. 10 да д. 22) заменена 180 метраў вадаправодных труб.",
        news3_title: "Мадэрнізацыя насоснай станцыі №3",
        news3_text: "Усталяваны новыя насосы Grundfos. Эканомія электраэнергіі — 25%.",
        news4_title: "Новыя фільтры на ачышчальных збудаваннях",
        news4_text: "Уведзена сучасная сістэма дачысткі сцёчных вод. Скарачэнне узважаных рэчываў на 40%.",
        contacts_title: "Кантакты",
        contact1_title: "Адрас",
        contact2_title: "Email",
        contact3_title: "Графік работы",
        schedule: "Пн–Пт: 08:00–17:00<br>Перапынак: 13:00–14:00<br>Сб–Нд: выходны",
        footer_note: "Служым Рэчыцы з клопатам пра кожны дом і кожную кроплю вады.",
        admin_title: "Адміністратыўная панэль",
        admin_login: "Лагін:",
        admin_password: "Пароль:",
        admin_enter: "Увайсці",
        admin_actions: "Дзеянні адміністратара",
        admin_add_news: "Дадаць навіну",
        admin_edit_rates: "Рэдагаваць тарыфы",
        admin_feedback: "Зваротная сувязь",
        admin_logout: "Выйсці"
    }
};
function switchLanguage(lang) {
    document.documentElement.lang = lang;
    document.getElementById('html-root').setAttribute('lang', lang);
    document.querySelectorAll('[data-key]').forEach(el => {
        const key = el.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) {
            if (el.tagName === 'P' && key === 'schedule') {
                el.innerHTML = translations[lang][key];
            } else {
                el.textContent = translations[lang][key];
            }
        }
    });
    localStorage.setItem('preferredLanguage', lang);
}
document.getElementById('language-switch').addEventListener('change', (e) => {
    switchLanguage(e.target.value);
});
document.addEventListener('DOMContentLoaded', () => {
    const saved = localStorage.getItem('preferredLanguage') || 'ru';
    document.getElementById('language-switch').value = saved;
    switchLanguage(saved);
});
document.getElementById('accessibility-toggle').addEventListener('click', () => {
    document.body.classList.toggle('accessibility-mode');
    localStorage.setItem('accessibilityMode', document.body.classList.contains('accessibility-mode'));
});
document.addEventListener('DOMContentLoaded', () => {
    if (localStorage.getItem('accessibilityMode') === 'true') {
        document.body.classList.add('accessibility-mode');
    }
});
function performSearch() {
    const query = document.getElementById('site-search').value.trim().toLowerCase();
    if (!query) return;
    const sections = document.querySelectorAll('section');
    let found = false;
    sections.forEach(sec => {
        if (sec.innerText.toLowerCase().includes(query)) {
            sec.scrollIntoView({ behavior: 'smooth', block: 'center' });
            sec.style.outline = '2px solid ' + getComputedStyle(document.documentElement).getPropertyValue('--accent');
            setTimeout(() => sec.style.outline = '', 2000);
            found = true;
        }
    });
    if (!found) {
        showModal('Поиск', `Ничего не найдено по запросу: "${query}"`);
    }
}
document.getElementById('search-btn').addEventListener('click', performSearch);
document.getElementById('site-search').addEventListener('keypress', e => {
    if (e.key === 'Enter') performSearch();
});
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            const offset = window.innerWidth < 768 ? 70 : 100;
            window.scrollTo({ top: target.offsetTop - offset, behavior: 'smooth' });
        }
    });
});
function animateOnScroll() {
    document.querySelectorAll('.fade-up').forEach(el => {
        if (el.getBoundingClientRect().top < window.innerHeight - 100) {
            el.classList.add('appear');
        }
    });
}
window.addEventListener('scroll', animateOnScroll);
document.addEventListener('DOMContentLoaded', animateOnScroll);
function toggleAdminPanel() {
    const panel = document.getElementById('admin-panel');
    panel.classList.toggle('hidden');
}
document.getElementById('admin-login-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const login = document.getElementById('admin-login').value;
    const password = document.getElementById('admin-password').value;
    if (login === "admin" && password === "123") {
        document.getElementById('admin-login-form').classList.add('hidden');
        document.getElementById('admin-actions').classList.remove('hidden');
        showModal('Успешный вход', 'Добро пожаловать в административную панель!');
    } else {
        showModal('Ошибка входа', 'Неверный логин или пароль.');
    }
});
function showModal(title, text) {
    const modal = document.getElementById('infoModal');
    document.getElementById('modalTitle').innerText = title;
    document.getElementById('modalText').innerHTML = text;
    modal.classList.add('active');
}
function closeModal() {
    document.getElementById('infoModal').classList.remove('active');
}
document.getElementById('modal-close-btn').addEventListener('click', closeModal);
document.querySelector('.close-modal').addEventListener('click', closeModal);
document.addEventListener('click', e => {
    if (e.target === document.getElementById('infoModal')) closeModal();
});
document.querySelectorAll('.logout').forEach(btn => {
    btn.addEventListener('click', e => {
        e.preventDefault();
        document.getElementById('admin-actions').classList.add('hidden');
        document.getElementById('admin-login-form').classList.remove('hidden');
        document.getElementById('admin-login-form').reset();
    });
});
document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('.nav-link');
    function setActiveLink() {
        let current = '';
        document.querySelectorAll('section').forEach(sec => {
            const top = sec.offsetTop - 120;
            if (window.scrollY >= top) current = sec.id;
        });
        navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === `#${current}`) {
                link.classList.add('active');
            }
        });
    }
    window.addEventListener('scroll', setActiveLink);
    setActiveLink();
});
